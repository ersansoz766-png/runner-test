name: token-permissions-test
on: workflow_dispatch
jobs:
  test:
    runs-on: [self-hosted, Windows, X64]
    steps:
      - name: Test Token Permissions
        shell: cmd
        run: |
          echo Testing read access...
          curl -H "Authorization: token %GITHUB_TOKEN%" https://api.github.com/user
          
          echo.
          echo Testing write access (should fail)...
          curl -X POST -H "Authorization: token %GITHUB_TOKEN%" https://api.github.com/repos/%GITHUB_REPOSITORY%/issues -d "{\"title\":\"test\"}"
