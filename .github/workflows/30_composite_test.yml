name: github-env-injection
on: workflow_dispatch
jobs:
  test:
    runs-on: [self-hosted, Windows, X64]
    steps:
      - name: Inject via GITHUB_ENV
        shell: cmd
        run: |
          echo Testing GITHUB_ENV injection...
          echo NORMAL_VAR=test123 >> %GITHUB_ENV%
          echo.
          echo Attempting multiline injection:
          echo EVIL_VAR=innocent >> %GITHUB_ENV%
          echo INJECTED_SECRET=LEAKED_PASSWORD >> %GITHUB_ENV%
          
      - name: Check if Injection Worked
        shell: cmd
        run: |
          echo Checking environment variables...
          echo NORMAL_VAR=%NORMAL_VAR%
          echo EVIL_VAR=%EVIL_VAR%
          echo INJECTED_SECRET=%INJECTED_SECRET%
